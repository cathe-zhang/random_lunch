<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>今天吃什么</title>
  <link rel="stylesheet" href="./assets/styles/index.css">
  <script src="./lib/vue.js"></script>
</head>
<body>

  <div id="app">
    <div class="tab">
      <div class="tab-item" v-on:click="tabClick" data-index="0">早上吃什么</div>
      <div class="tab-item active" v-on:click="tabClick" data-index="1">中午吃什么</div>
      <div class="tab-item" v-on:click="tabClick" data-index="2">晚上吃什么</div>
    </div>
    <div class="display-item">
      今天中午吃{{message}}
    </div>
    <div class="btn-start" v-bind:class='{active: isActive}' v-on:click="btnClick">
      {{btnText}}
    </div>
  </div>

  <script>
    var app = new Vue({
      el: '#app',
      data: {
        btnText: '点击开始',
        isActive: false,
        message: '刘胖子',
        randomId: '',
        tabIndex: 0,
        list: [
          '刘胖子',
          '老长沙',
          '刘笼子',
          '牛尾巴',
          '津市牛肉粉',
          '兰州拉面',
          '拌面',
          '热干面',
          'biangbiang面',
          '牛肉炒饭',
          '炒个锤子',
          '蛙来哒',
        ]
      },
      computed: {

      },
      methods: {
        // tab点击
        tabClick: function(e){
          var currentNode = e
          var tabList = document.getElementsByClassName('tab-item')
          console.log(tabList)
          for ( var i=0; i<tabList.length; i++ ) {
            if ( i == currentIndex ) {
              console.log(i)
              tabList[i].classList.add('active')
            }
            else {
              tabList[i].classList.remove('active')
            }
          }
        },
        // 按钮点击
        btnClick: function(){
          if ( this.isActive ) {
            this.stopRandom()
          }
          else {
            this.startRandom()
          }
        },
        // 开始
        startRandom: function(){
          this.isActive = true
          this.btnText = '停'
          var self = this
          var list = this.list
          this.randomId = setInterval(function(){
            self.message = list[Math.floor(Math.random()*list.length)]
          },100)
        },
        // 停止
        stopRandom: function(){
          this.isActive = false
          this.btnText = '点击开始'
          clearInterval(this.randomId)
        }
      },
      created: function(){  // 在实例被创建之后执行

      }
    })
  </script>

</body>
</html>